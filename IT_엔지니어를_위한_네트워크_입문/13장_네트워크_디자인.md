# 2계층/3계층 네트워크

## 2계층 네트워크

  호스트 간 통신이 직접 2계층 통신만으로 이루어지는 네트워크 디자인

![image-20240501104715605](images/13장_네트워크_디자인/image-20240501104715605.png)

## 3계층 네트워크

  호스트 간 통신이 IP 라우팅과 같은 3계층 통신으로 이루어지는 네트워크 디자인. 라우팅으로 구성되므로 루프 문제가 발생하지 않음. 하지만 각자 다른 네트워크이기 때문에 브로드캐스트로 상대방 호스트를 직접 찾을 수 없음

![image-20240501110323498](images/13장_네트워크_디자인/image-20240501110323498.png)

# 3-Tier 아키텍처

  코어 - 애그리게이션 - 액세스 3계층으로 이루어진 전통적인 네트워크 아키텍처.

![image-20240501110808673](images/13장_네트워크_디자인/image-20240501110808673.png)

액세스는 호스트가 직접 연결된 스위치이며 애그리게이션 스위치는 액세스 스위치를 중간에서 접선한다. 코어 계층 스위치는 애그리게이션 스위치를 다시 모아 서로 통신할 수 있게 연결해준다. 상위 계층으로 갈수록 높은 대역폭이 필요하다.

# 2-Tier 아키텍처

  스파인-리프(Spine-Leaf) 2-Tier 디자인은 데이터 센터 디자인으로 많이 적용됨

![image-20240501111245065](images/13장_네트워크_디자인/image-20240501111245065.png)

  데이터 센터에서는 센터 내부의 서버 간 통신량이 많기 때문에 East-West 트래픽이 많음. 스파인-리프 네트워크 디자인에서는 동일 리프 스위치에 호스트가 연결된 경우를 제외하면 모든 호스트 간 통신 홉이 동일함. 따라서 홉 수가 짧아지고 트래픽 흐름이 일정해짐.

  해당 구성은 2계층과 3계층에서 모두 사용할 수 있음

**L2 패브릭**

  스파인-리프 구조를 2계층 네트워크로 구성하는 방법. TRILL 이나 SPB 와 같은 프로토콜을 사용할 수 있음.

![image-20240501112240716](images/13장_네트워크_디자인/image-20240501112240716.png)

**L3 패브릭**

  스파인-리프 구조를 3계층 네트워크로 구성하는 방법. 스파인과 리프가 연결된 링크는 각각 라우팅이 활성화되어 있고 라우팅 프로토콜을 이용해 경로 정보를 교환함

![image-20240501112805116](images/13장_네트워크_디자인/image-20240501112805116.png)

  하단 호스트의 네트워크가 리프 간에 서로 다른 네트워크를 갖기 때문에 동일한 네트워크 구성이 필요하다면 VxLAN 과 같은 오버레이 네트워크 기술을 적용해야 함.

# 케이블링과 네트워크

  스위치의 물리적 위치에 따른 구성 방식

- ToR : 랙 상단에 개별적으로 설치되는 스위치. 서버와 스위치가 동일 랙에 있으므로 케이블링의 길이나 복잡성이 줄어들지만 스위치가 더 많이 필요하므로 관리사항과 전력, 냉각비용 등이 늘어남. 랙별로 스위치를 구성하므로 미사용 포트가 늘어 포트의 집적도가 떨어짐
  - ![image-20240501113417160](images/13장_네트워크_디자인/image-20240501113417160.png)
- EoR : 랙이 있는 행 끝에 네트워크 장비를 두고 연결. 필요한 스위치 장비 수가 줄어들고 대기시간이나 지연에 유리. 하지만 서버와의 케이블 구성이 더 멀어지므로 복잡도가 높아지고 케이블이 길어짐.
  - ![image-20240501113736321](images/13장_네트워크_디자인/image-20240501113736321.png)
- MoR : 네트워크 장비의 랙을 행 끝이 아닌 중간에 두는 방식. EoR 과 비교해서 네트워크 장비가 중간에 있어 케이블 길이가 전반적으로 감소함
  - ![image-20240501113833546](images/13장_네트워크_디자인/image-20240501113833546.png)