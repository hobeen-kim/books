# 8.1 서버의 네트워크 설정 및 확인

 ## 8.1.1 리눅스 서버 네트워크

  일반적으로 리눅스에서 설정 파일이 텍스트 형태이고 텍스트를 직접 수정해 시스템 구성을 변경합니다.

### 8.1.1.1 CentOS 의 네트워크 설정

  `/etc/sysconfig/network-scripts` 위치에 있습니다. 인터페이스에 대한 설정 파일이나 인터페이스 제어용 스크립트가 있습니다.

  리눅스에서 인터페이스 설정파일을 수정하면 네트워크 서비스를 재시작하거나 인터페이스를 재시작해야 합니다. 

- 네트워크 서비스 재시작 : `systemctl restart network.service`
- 특정 인터페이스 다운 : `ifdown ifcfg-eth0`
- 특정 인터페이스 업 : `ifdown ifcfg-eth0`

### 8.1.1.2 우분투의 네트워크 설정

`/etc/network/interfaces` 에 설정파일이 있습니다. CentOS 와는 다르게 우분투는 interfaces 설정 파일에 네트워크의 모든 인터페이스 설정이 들어갑니다. 우분투에서 네트워크 서비스를 시작/정지/재시작하기 위해서는 다음 명령어를 사용합니다.

- `/etc/init.d/networking start`
- `/etc/init.d/networking stop`
- `/etc/init.d/networking reload`
- `/etc/init.d/networking restart`
- `/etc/init.d/networking force-reload`

# 8.2 서버의 라우팅 테이블

  서버에서도 라우팅 테이블을 가지고 있는데, 따로 설정하지 않더라도 디폴트 라우팅 테이블이 등록됩니다. 하지만 아래와 같이 네트워크 어댑터를 두 개 이상 사용할 때 여러 가지 고려사항이 생길 수 있습니다.

![image-20240409094846947](images/8장_서버_네트워크_기본/image-20240409094846947.png)

  두 네트워크 어댑터에 모두 다폴트 게이트웨이 설정을 하면 정상적으로 통신이 되지 않습니다. 외부 공인망 네트워크와 통신해야 하는 프론트엔드 네트워크 쪽 어댑터만 디폴트 게이트웨이를 설정하고 백엔드를 연결하는 어댑터에는 별도로 적절한 라우팅 정보를 반드시 설정해주어야 합니다.

## 8.2.1 서버의 라우팅 테이블

  서버의 라우팅 테이블 항목은 보통 아래와 같은 항목을 갖습니다.

- 목적지(Destination)
- 서브넷(Genmask)
- 게이트웨이(Gateway)
- 인터페이스(Iface)
- 우선순위(Metric)

![image-20240409095851784](images/8장_서버_네트워크_기본/image-20240409095851784.png)

  목적지와 서브넷은 서버가 통신하려는 목적지 IP 주소에 맞는 라우팅을 선택하는 기준이 됩니다. 게이트웨이는 목적지로 가기 위해 선택하는 넥스트 홉입니다.